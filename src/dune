(library
 (name memtrace)
 (public_name memtrace)
 (libraries unix threads pbrt))

;; Generate protobuf serialisation
(rule
 (targets profile.ml profile.mli)
 (deps
   (:proto profile.proto))
 (action
   (run ocaml-protoc %{proto} --binary --ml_out .)))